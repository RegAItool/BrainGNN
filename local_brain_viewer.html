<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Brain Pain Analysis Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .brain-container {
            width: 800px;
            height: 600px;
            margin: 0 auto;
            background: radial-gradient(circle, #16213e, #0f0f23);
            border: 2px solid #444;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .brain-outline {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 300px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 200px 200px 150px 150px;
            opacity: 0.5;
        }
        
        .region {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px black;
            border: 2px solid white;
            transition: all 0.3s ease;
        }
        
        .region:hover {
            transform: scale(1.5);
            z-index: 100;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }
        
        .enhanced {
            background: radial-gradient(circle, #ff4757, #c44569);
            animation: glow-red 2s ease-in-out infinite alternate;
        }
        
        .suppressed {
            background: radial-gradient(circle, #3742fa, #2f3542);
            animation: glow-blue 2s ease-in-out infinite alternate;
        }
        
        .top-k {
            border: 3px solid #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        @keyframes glow-red {
            from { box-shadow: 0 0 5px #ff4757; }
            to { box-shadow: 0 0 15px #ff4757; }
        }
        
        @keyframes glow-blue {
            from { box-shadow: 0 0 5px #3742fa; }
            to { box-shadow: 0 0 15px #3742fa; }
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            min-width: 200px;
        }
        
        .control-group h3 {
            margin-top: 0;
            color: #ffd700;
        }
        
        .info-panel {
            max-width: 800px;
            margin: 20px auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }
        
        .region-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            min-height: 80px;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 20px;
        }
        
        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            min-width: 120px;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #ffd700;
        }
        
        input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        
        input[type="checkbox"] {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üß† Brain Pain Processing Analysis</h1>
        <p>FC+GNN Explainable Analysis - Interactive Brain Region Explorer</p>
        <p>Model Accuracy: 98.7% | Top-K Selection & Structural Attention</p>
    </div>
    
    <div class="controls">
        <div class="control-group">
            <h3>üéõÔ∏è Display Options</h3>
            <label>Region Size: <input type="range" id="sizeSlider" min="0.5" max="2" value="1" step="0.1"></label>
            <br><br>
            <label><input type="checkbox" id="topKOnly" checked> Show Top-K Only</label>
            <br>
            <label><input type="checkbox" id="showLabels" checked> Show Labels</label>
        </div>
        
        <div class="control-group">
            <h3>üé® Color Mode</h3>
            <label><input type="radio" name="colorMode" value="activation" checked> Pain Activation</label>
            <br>
            <label><input type="radio" name="colorMode" value="importance"> Importance Level</label>
            <br>
            <label><input type="radio" name="colorMode" value="network"> Brain Networks</label>
        </div>
        
        <div class="control-group">
            <h3>üìä Quick Stats</h3>
            <div class="stat-value" style="font-size: 1.5em;">15</div>
            <div>Top-K Regions</div>
            <br>
            <div class="stat-value" style="font-size: 1.5em;">98.7%</div>
            <div>Accuracy</div>
        </div>
    </div>
    
    <div class="brain-container" id="brainContainer">
        <div class="brain-outline"></div>
        <!-- Regions will be added by JavaScript -->
    </div>
    
    <div class="legend">
        <div class="legend-item">
            <div class="legend-dot" style="background: #ff4757;"></div>
            <span>Pain Enhanced (8 regions)</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #3742fa;"></div>
            <span>Pain Suppressed (28 regions)</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: transparent; border-color: #ffd700;"></div>
            <span>Top-K Important</span>
        </div>
    </div>
    
    <div class="stats">
        <div class="stat">
            <div class="stat-value">36</div>
            <div>Total Regions</div>
        </div>
        <div class="stat">
            <div class="stat-value">9</div>
            <div>Networks</div>
        </div>
        <div class="stat">
            <div class="stat-value">8</div>
            <div>Enhanced</div>
        </div>
        <div class="stat">
            <div class="stat-value">28</div>
            <div>Suppressed</div>
        </div>
    </div>
    
    <div class="info-panel">
        <h3>üîç Region Details</h3>
        <div class="region-info" id="regionInfo">
            <p><strong>Click on any brain region to see detailed information</strong></p>
            <p>The visualization shows the top-15 most important brain regions identified by our FC+GNN analysis.</p>
            <p>Red regions show enhanced activation during pain, while blue regions show suppression.</p>
        </div>
    </div>

    <script>
        // Brain regions data
        const regions = [
            {name: "Postcentral_L", x: 250, y: 200, size: 40, activation: 0.000437, importance: 2.525, network: "sensorimotor", topK: true, type: "enhanced"},
            {name: "Postcentral_R", x: 550, y: 200, size: 35, activation: 0.000155, importance: 0.915, network: "sensorimotor", topK: true, type: "enhanced"},
            {name: "Cerebelum_Crus1_L", x: 350, y: 450, size: 32, activation: 0.000142, importance: 0.763, network: "cerebellar", topK: true, type: "enhanced"},
            {name: "Frontal_Sup_R", x: 500, y: 120, size: 32, activation: 0.000138, importance: 0.762, network: "cognitive_control", topK: true, type: "enhanced"},
            {name: "Frontal_Sup_L", x: 300, y: 120, size: 30, activation: 0.000155, importance: 0.691, network: "cognitive_control", topK: true, type: "enhanced"},
            {name: "Frontal_Mid_L", x: 250, y: 150, size: 28, activation: 0.000158, importance: 0.602, network: "cognitive_control", topK: true, type: "enhanced"},
            {name: "Frontal_Mid_R", x: 550, y: 150, size: 25, activation: 0.000141, importance: 0.317, network: "cognitive_control", topK: true, type: "enhanced"},
            {name: "Occipital_Mid_R", x: 520, y: 400, size: 24, activation: 0.000142, importance: 0.289, network: "visual", topK: true, type: "enhanced"},
            {name: "Hippocampus_L", x: 380, y: 280, size: 22, activation: 0.0, importance: 0.247, network: "limbic", topK: true, type: "suppressed"},
            {name: "Thalamus_L", x: 390, y: 250, size: 20, activation: 0.0, importance: 0.232, network: "subcortical", topK: true, type: "suppressed"},
            {name: "ParaHippocampal_L", x: 360, y: 300, size: 18, activation: 0.0, importance: 0.135, network: "limbic", topK: true, type: "suppressed"},
            {name: "Putamen_L", x: 370, y: 240, size: 18, activation: 0.0, importance: 0.134, network: "subcortical", topK: true, type: "suppressed"},
            {name: "Amygdala_L", x: 350, y: 270, size: 16, activation: 0.0, importance: 0.097, network: "limbic", topK: true, type: "suppressed"},
            {name: "Parietal_Sup_R", x: 520, y: 220, size: 16, activation: 0.0, importance: 0.082, network: "attention", topK: true, type: "suppressed"},
            {name: "Thalamus_R", x: 410, y: 250, size: 16, activation: 0.0, importance: 0.082, network: "subcortical", topK: true, type: "suppressed"}
        ];

        let sizeScale = 1.0;
        let showTopKOnly = true;
        let showLabels = true;
        let colorMode = 'activation';

        function createRegions() {
            const container = document.getElementById('brainContainer');
            
            regions.forEach((region, index) => {
                const div = document.createElement('div');
                div.className = 'region';
                div.id = `region-${index}`;
                
                updateRegion(div, region);
                
                div.addEventListener('click', () => showRegionDetails(region));
                container.appendChild(div);
            });
        }

        function updateRegion(div, region) {
            const size = region.size * sizeScale;
            
            div.style.left = (region.x - size/2) + 'px';
            div.style.top = (region.y - size/2) + 'px';
            div.style.width = size + 'px';
            div.style.height = size + 'px';
            
            // Clear classes
            div.className = 'region';
            
            // Add type class
            if (colorMode === 'activation') {
                div.classList.add(region.type);
            } else if (colorMode === 'importance') {
                const intensity = Math.min(region.importance / 3.0, 1.0);
                const color = intensity > 0.5 ? '#ff6b6b' : '#74b9ff';
                div.style.background = `radial-gradient(circle, ${color}, ${color}88)`;
            } else if (colorMode === 'network') {
                const networkColors = {
                    'sensorimotor': '#2ecc71',
                    'cerebellar': '#e74c3c',
                    'cognitive_control': '#3498db',
                    'visual': '#f39c12',
                    'limbic': '#9b59b6',
                    'subcortical': '#1abc9c',
                    'attention': '#f1c40f'
                };
                const color = networkColors[region.network] || '#95a5a6';
                div.style.background = `radial-gradient(circle, ${color}, ${color}88)`;
            }
            
            if (region.topK) {
                div.classList.add('top-k');
            }
            
            div.style.display = (!showTopKOnly || region.topK) ? 'flex' : 'none';
            div.textContent = showLabels ? region.name.split('_')[0] : '';
        }

        function updateAllRegions() {
            regions.forEach((region, index) => {
                const div = document.getElementById(`region-${index}`);
                if (div) updateRegion(div, region);
            });
        }

        function showRegionDetails(region) {
            const info = document.getElementById('regionInfo');
            const activationType = region.type === 'enhanced' ? 'Enhanced during pain' : 'Suppressed during pain';
            const topKStatus = region.topK ? '‚úÖ Top-K Selected' : '‚ùå Not in Top-K';
            
            info.innerHTML = `
                <h4>${region.name.replace(/_/g, ' ')}</h4>
                <p><strong>Network:</strong> ${region.network.replace(/_/g, ' ')}</p>
                <p><strong>Activation Type:</strong> ${activationType}</p>
                <p><strong>Activation Value:</strong> ${region.activation > 0 ? '+' : ''}${region.activation.toFixed(6)}</p>
                <p><strong>Importance Score:</strong> ${region.importance.toFixed(3)}</p>
                <p><strong>Status:</strong> ${topKStatus}</p>
                <p><strong>Description:</strong> ${getDescription(region.name)}</p>
            `;
        }

        function getDescription(name) {
            const descriptions = {
                'Postcentral_L': 'Primary somatosensory cortex - processes touch and pain sensations from the right side of the body',
                'Postcentral_R': 'Right somatosensory cortex - processes sensory information from the left side of the body',
                'Cerebelum_Crus1_L': 'Cerebellar region involved in sensorimotor integration and pain modulation',
                'Frontal_Sup_R': 'Superior frontal gyrus - involved in cognitive control and attention regulation',
                'Frontal_Sup_L': 'Left superior frontal cortex - important for top-down pain regulation and cognitive control',
                'Frontal_Mid_L': 'Middle frontal gyrus - key area for executive control and working memory functions'
            };
            return descriptions[name] || 'Important brain region involved in pain processing and neural network function';
        }

        function setupControls() {
            document.getElementById('sizeSlider').addEventListener('input', (e) => {
                sizeScale = parseFloat(e.target.value);
                updateAllRegions();
            });

            document.getElementById('topKOnly').addEventListener('change', (e) => {
                showTopKOnly = e.target.checked;
                updateAllRegions();
            });

            document.getElementById('showLabels').addEventListener('change', (e) => {
                showLabels = e.target.checked;
                updateAllRegions();
            });

            document.querySelectorAll('input[name="colorMode"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    colorMode = e.target.value;
                    updateAllRegions();
                });
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createRegions();
            setupControls();
        });
    </script>
</body>
</html>